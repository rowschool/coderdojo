<script>
    function getQuery(key) {
        var query = window.location.search.substring(1);
        var key_values = query.split("&");
        var params = {};
        key_values.map(function (key_val) {
            var key_val_arr = key_val.split("=");
            params[key_val_arr[0]] = key_val_arr[1];
        });
        if (typeof params[key] != "undefined") {
            return params[key];
        }
        return "";
    }

    window.onload = function () {
        md = document.createElement("zero-md")
        md.setAttribute("src", getQuery("src"))
        md.setAttribute("no-shadow", "")
        document.getElementById("mdcontainer").append(md)
    }
</script>


{{#> base}}
  <head>
      <script type="module" src="https://cdn.jsdelivr.net/gh/zerodevx/zero-md@2/dist/zero-md.min.js"></script>
      {{!-- <meta http-equiv="refresh" content="0;url=/lesson-plan.html?src=https://github.com/rowschool/coderdojo-lessons/blob/main/README.md" /> --}}
  </head>

  <div id="mdcontainer"></div>
{{/base}}

{{!-- NOTE: Links don't work from the TOC.
You might need to find something that can assemble a TOC and re-render the lessons plus iframes.
Like a home-rolled readthedocs.
Might you need to clone and rewrite zero-md.min.js a little?
https://github.com/zhlicen/md.htm?tab=readme-ov-file
--}}
